# 3D 台球训练 App 摄像头系统设计文档

（适用于瞄准训练 + 走位训练）

------------------------------------------------------------------------

# 一、设计目标

本摄像头系统面向专业台球训练场景，需同时满足：

-   🎯 瞄准稳定性训练
-   🎯 走位路径理解训练
-   🎯 出杆结果复盘分析
-   🎯 专业玩家手感一致性

核心原则：

1.  永远不替玩家转角度
2.  仅在必要时自动缩放
3.  所有自动行为必须可预测
4.  球停后必须平滑回到瞄准状态

------------------------------------------------------------------------

# 二、整体架构：三态相机状态机

CameraState ├── Planning（观察态） ├── Aim（瞄准态） └──
Action（运动观战态）

状态流转：

Planning → Aim → Action → Aim

------------------------------------------------------------------------

# 三、各状态详细设计

## 1️⃣ Planning（观察态）

### 目的

-   观察球型
-   规划走位
-   查看袋口角度
-   快速扫台

### 功能

-   自由 Orbit 旋转
-   可修改旋转中心
-   支持临时俯视
-   支持快速后退查看整桌

------------------------------------------------------------------------

## 2️⃣ Aim（瞄准态）

### 目标

-   稳定击球视角
-   形成肌肉记忆
-   提高瞄准一致性

### 锚点

focusPoint = cueBall.position

### 角度控制

pitch ∈ \[10°, 35°\]

### 距离记忆机制

lastAimDistance\
lastAimPitch

每次进入 Aim 状态：

distance = lastAimDistance\
pitch = lastAimPitch

------------------------------------------------------------------------

## 3️⃣ Action（运动观战态）

### 出杆瞬间

targetDistance = lastAimDistance \* 2.0

### 球运动中模式

专业模式：不跟随\
训练模式：轻度跟随

focus = lerp(focus, cueBall.position, 0.1)

### 球停后

targetDistance = lastAimDistance\
state = .aim

------------------------------------------------------------------------

# 四、训练增强设计

## 轨迹叠加模式

-   显示母球真实轨迹
-   显示目标球轨迹
-   对比理论路线

## 双画面复盘模式

主视角 + 小窗俯视图

## 误差分析视角

-   自动旋转至最佳观察角度
-   放慢回放
-   高亮母球停点

------------------------------------------------------------------------

# 五、参数推荐

  参数              推荐值
  ----------------- ---------------
  Aim 默认距离      0.8 \~ 1.2 m
  默认 FOV          40° \~ 45°
  Action 拉远倍数   1.8 \~ 2.5
  Aim pitch 范围    10° \~ 35°
  过渡时间          0.25s \~ 0.4s
  跟随强度          0.08 \~ 0.15
  Roll 锁定         eulerAngles.z = 0（始终）

------------------------------------------------------------------------

# 六、工程结构示例

``` swift
enum CameraState {
    case planning
    case aim
    case action
}
```

``` swift
func onShoot() {
    state = .action
    targetDistance = lastAimDistance * 2.0
}
```

``` swift
func onBallsStopped() {
    state = .aim
    targetDistance = lastAimDistance
}
```

------------------------------------------------------------------------

# 七、总结

专业 3D 台球相机的本质：

-   稳定
-   可预测
-   不干预玩家判断
-   球停必回瞄准态

训练类产品在此基础上增加：

-   轨迹可视化
-   误差复盘
-   多视角分析

------------------------------------------------------------------------

文档版本 v1.0
